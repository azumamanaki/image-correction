name: Run Image Correction

on:
  schedule:
    - cron: "0 */6 * * *"  # UTCで6時間ごと（日本時間だと午前3時,9時,15時,21時）
  workflow_dispatch:      # 手動トリガーも可能

jobs:
  image_correction:
    runs-on: ubuntu-latest

    env:
      GCP_CREDENTIALS: ${{ secrets.GCP_CREDENTIALS }}
      DROPBOX_ACCESS_TOKEN = "sl.u.AF5PTP9nQYg1Ycw_cpUwpeCVlnxRpFr5mwhQ4Q6Tw5OUJq-FzC1DGIM3zHs00iVnbrMl_G8zOfdQYeTKTrasuN3sCqEkzvpVHTNOTqqg_hBRnJTukpWvlQ9xsJyVOGlBH3MhFrWtwa3c-1G1fKO7L2i_GJqLbsYHpplKmvEU5um8Eb3cJfSKmcbPMSibr4T9bePhb3fnbRbAGiqJUqAwd0bgfxFJnc6IieRPGZuxeGJF6TOTv8uYRDmLBpq0isfexY5YtcMB7-QtYl5aX__mgPaxbEsAheSp1lTgM9Azy1-TQ-zjcvM3ZwHlQTyNpFa06zQrkEy9AOuD5eDYIlsaT82cbyLeVeA3lUOdJmd0HAq0F4fVEEW8ylOgeWnIrbY8OttofJ4KayJ1iBfwzaAzmxlK_1mzgH6ape3GK88BYqbTgksXHEkMH3r2YNNWnt6VnqtxXipdfuZq7svk_m0u1O2hTAu2woFNIHMHwBc7kv6ySoGGD_ggUWdgPgSJlSVrnvF1vIWpegtZjejeRW4g47rGigvAHZi3_IGWAh47agpT4br69S0QSqA1xInhjE6b--tHL8_6NGRImC9sq0Yc85yXGl1Txz4lSkfn8zXnmXEyAt35jO17B0yuIaRJqAOC31mF6JnWBwWiOsxKEN4oWXI-3GD1aKdWH-QtEA4XxTOyOp4-dwMvG-Vl3a7KyqCBDB1TRjqb0G_NCn9UPdHERU-4R88Eq5rrNatV8pMt-F06t1SdVUoRrNWXgYOyyeKxD8g8Wf3bVKKPMLI1VTCO6SNsNZIDUfGacjau0jy3GFBJJ1mVHnxqstSiahdb5jOJW69rkZZ7PvNmmXrSxsnYJt24tqEV6sciuCBs3i1HPbuUTotgkw37hHQ5wW0vZ8qIGVmnGwm9fAlMQc1cnKcpYM2dOxebJiOFyUef0PXiHy8RturVrUX9QHsqAvwRrixhlj7D4pDVb-Ni0kWtORYV5oU1g3qiUtk8b8GRR9grT8I-gFJSIQ3CmZtOF3SXRCr8fI8W1Pi1Tx5ljYedOoMt-xWFdFjm2YCtAT6cI6BF32aiMs7_mnyH0QkEXsF582W-bRLnHPeLyd3I64Iakvwf6f12onTtl2yZF45Afom8_9bXWdcaDBwcv_XVuabTASpN35wwBhJAEZ1RGMsYYR2zMUAwbX1Uc5_IMbzsI0nPJXHjBID-OMX0n8oK-O0s0GWvanB9bNsWTz-LBWONmazIvfr9c300v6qPByW6U2_XKYRmk8zAR8ZNSEyKHp6Mk9JkxDLgtKCeYnP7y4y5eWDEFeEhrgeqHOc1Fvp1WdX1dCA9smjQAVsxF2WABoFFGDBFYLexErEkuiapgxHhsXPQf9_kWsId-mB1Oiqgxnb66vNYsZDRTh-ZF3rw8MrTJ9q0IAb64sD99fzhB4QFABxeVpV-"

    steps:
      - name: Check out repository
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.10"

      - name: Install dependencies
        run: pip install -r requirements.txt

      - name: Run the correction script
        run: python index.py